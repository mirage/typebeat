<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>TypeBeat (typebeat.TypeBeat)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">typebeat</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">TypeBeat</span></h1></header><p>Module Content-Type</p><p>The purpose of the <code class="code">&quot;Content-Type&quot;</code> field is to describe the data contained
in the body fully enough that the receiving user agent can pick an
appropriate agent or mechanism to present the data to the user, or otherwise
deal with the data in an appropriate manner. The value in this field is
called a media type.</p><p>The <code class="code">&quot;Content-Type&quot;</code> header field specifies the nature of the data in the
body of an entity by giving media type and subtype identifiers, and by
providing auxiliary information that may be required for certain media
types. After the media type and subtype names, the remainder of the header
field is simply a set of parameters, specified in a <code class="code">&quot;attribute=value&quot;</code>
notation. The ordering of parameters is not significant.</p><div class="spec type" id="type-ty"><a href="#type-ty" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>ty</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-ty.Application" class="anchored"><td class="def constructor"><a href="#type-ty.Application" class="anchor"></a><code><span class="keyword">| </span></code><code>`Application</code></td></tr><tr id="type-ty.Audio" class="anchored"><td class="def constructor"><a href="#type-ty.Audio" class="anchor"></a><code><span class="keyword">| </span></code><code>`Audio</code></td></tr><tr id="type-ty.Ietf_token" class="anchored"><td class="def constructor"><a href="#type-ty.Ietf_token" class="anchor"></a><code><span class="keyword">| </span></code><code>`Ietf_token<span class="keyword"> of </span>string</code></td></tr><tr id="type-ty.Image" class="anchored"><td class="def constructor"><a href="#type-ty.Image" class="anchor"></a><code><span class="keyword">| </span></code><code>`Image</code></td></tr><tr id="type-ty.Message" class="anchored"><td class="def constructor"><a href="#type-ty.Message" class="anchor"></a><code><span class="keyword">| </span></code><code>`Message</code></td></tr><tr id="type-ty.Multipart" class="anchored"><td class="def constructor"><a href="#type-ty.Multipart" class="anchor"></a><code><span class="keyword">| </span></code><code>`Multipart</code></td></tr><tr id="type-ty.Text" class="anchored"><td class="def constructor"><a href="#type-ty.Text" class="anchor"></a><code><span class="keyword">| </span></code><code>`Text</code></td></tr><tr id="type-ty.Video" class="anchored"><td class="def constructor"><a href="#type-ty.Video" class="anchor"></a><code><span class="keyword">| </span></code><code>`Video</code></td></tr><tr id="type-ty.X_token" class="anchored"><td class="def constructor"><a href="#type-ty.X_token" class="anchor"></a><code><span class="keyword">| </span></code><code>`X_token<span class="keyword"> of </span>string</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>In general, the top-level media type is used to declare the general type of
data.</p><p>If another top-level type is to be used for any reason, it must be given a
name starting with <code class="code">&quot;X-&quot;</code> to indicate its non-standard status and to avoid a
potential conflict with a future official name.</p></div></div><div class="spec type" id="type-subty"><a href="#type-subty" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>subty</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-subty.Ietf_token" class="anchored"><td class="def constructor"><a href="#type-subty.Ietf_token" class="anchor"></a><code><span class="keyword">| </span></code><code>`Ietf_token<span class="keyword"> of </span>string</code></td></tr><tr id="type-subty.Iana_token" class="anchored"><td class="def constructor"><a href="#type-subty.Iana_token" class="anchor"></a><code><span class="keyword">| </span></code><code>`Iana_token<span class="keyword"> of </span>string</code></td></tr><tr id="type-subty.X_token" class="anchored"><td class="def constructor"><a href="#type-subty.X_token" class="anchor"></a><code><span class="keyword">| </span></code><code>`X_token<span class="keyword"> of </span>string</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>While the subtype specifies a specific format for that type of data. Thus, a
media type of <code class="code">&quot;image/xyz&quot;</code> is enough to tell a user agent that the data is
an image, even if the user agent has no knowledge of the specific image
format <code class="code">&quot;xyz&quot;</code>. Such information can be used, for example, to decide whether or
not to show a user the raw data from an unrecognized subtype -- such an
action might be reasonable for unrecognized subtype of text, but not for
unrecognized subtypes of image or audio.</p><p>For this reason, registered subtypes of text, image, audio and video should
not contain embedded information that is really of a different type. Such
compound formats should be represented using the <code class="code">&quot;multipart&quot;</code> or
<code class="code">&quot;application&quot;</code> types.</p><p>TypeBeat recognizes 3 subtypes:
</p><ul><li>Subtype from the
<a href="http://www.iana.org/assignments/media-types/media-types.xhtml">IANA
database</a>: <code class="code">`Iana_token</code></li><li>Valid subtype but not recognized by the IANA database: <code class="code">`Ietf_token</code></li><li>Like <a href="index.html#type-ty">ty</a>, a non-standard subtype starting with <code class="code">&quot;X-&quot;</code>: <code class="code">`X_token</code></li></ul></div></div><div class="spec type" id="type-value"><a href="#type-value" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>value</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-value.String" class="anchored"><td class="def constructor"><a href="#type-value.String" class="anchor"></a><code><span class="keyword">| </span></code><code>`String<span class="keyword"> of </span>string</code></td></tr><tr id="type-value.Token" class="anchored"><td class="def constructor"><a href="#type-value.Token" class="anchor"></a><code><span class="keyword">| </span></code><code>`Token<span class="keyword"> of </span>string</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>Parameters are modifiers of the media subtype, and as such do not
fundamentally alter the nature of the content. The set of meaningful
parameters depends on the media type and subtype, However, a given top-level
media type may define parameters which are applicable to any subtype of that
type.</p><p>Parameters may be required by their defining content type or subtype or they
may be optional. TypeBeat does not check any assumption about parameters
except for the <code class="code">`Multipart</code> where it expects the <code class="code">&quot;boundary&quot;</code> parameter -
but TypeBeat does not process (not yet!) the <code class="code">&quot;charset&quot;</code> parameter for
example.</p><p>Note that the value of a parameter can be a quoted string (<code class="code">`String</code>). In this
case, the value does not include the quotes. That is, the quotation marks in
a quoted-string are not a part of the value of the parameter, but are merely
used to delimit that parameter value. In other case, the value is <code class="code">`Token</code>.</p></div></div><div class="spec type" id="type-content"><a href="#type-content" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>content</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-content.ty" class="anchored"><td class="def field"><a href="#type-content.ty" class="anchor"></a><code>ty : <a href="index.html#type-ty">ty</a>;</code></td></tr><tr id="type-content.subty" class="anchored"><td class="def field"><a href="#type-content.subty" class="anchor"></a><code>subty : <a href="index.html#type-subty">subty</a>;</code></td></tr><tr id="type-content.parameters" class="anchored"><td class="def field"><a href="#type-content.parameters" class="anchor"></a><code>parameters : (string<span class="keyword"> * </span><a href="index.html#type-value">value</a>) list;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>A convenience record to deal with the <code class="code">&quot;Content-Type&quot;</code> which contains:
</p><ul><li>the media type <code class="code">ty</code></li><li>the subtype <code class="code">subty</code></li><li>parameters: a associative list of <code class="code">(attribute, value)</code></li></ul></div></div><div class="spec val" id="val-pp_ty"><a href="#val-pp_ty" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_ty : Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-ty">ty</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">pp_ty ty</code> prints a human-readable representation of <a href="index.html#type-ty">ty</a>.</p></div></div><div class="spec val" id="val-pp_subty"><a href="#val-pp_subty" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_subty : Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-subty">subty</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">pp_subty subty</code> prints a human-readable representation of <a href="index.html#type-subty">subty</a>.</p></div></div><div class="spec val" id="val-pp_value"><a href="#val-pp_value" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_value : Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-value">value</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">pp_value value</code> prints a human-readable representation of <a href="index.html#type-value">value</a>.</p></div></div><div class="spec val" id="val-pp_parameter"><a href="#val-pp_parameter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_parameter : Format.formatter <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span><a href="index.html#type-value">value</a>) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">pp_parameter (attribute, value)</code> prints a human-readable representation of
<code class="code">parameter</code>.</p></div></div><div class="spec val" id="val-pp"><a href="#val-pp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp : Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-content">content</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">pp content</code> prints a human-readable representation of <a href="index.html#type-content">content</a>.</p></div></div><div class="spec val" id="val-make"><a href="#val-make" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make : ?&#8288;parameters:(string<span class="keyword"> * </span><a href="index.html#type-value">value</a>) list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-ty">ty</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-content">content</a></code></div><div class="doc"></div></div><div class="spec val" id="val-equal"><a href="#val-equal" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>equal : ?&#8288;insensitive:[ `All | `Parameters of string list ] <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-content">content</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-content">content</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-default"><a href="#val-default" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>default : <a href="index.html#type-content">content</a></code></div><div class="doc"><p>Default <a href="https://tools.ietf.org/html/rfc822">RFC822</a> messages without a
MIME <code class="code">&quot;Content-Type&quot;</code> header are taken by this protocol to be plain text in
the US-ASCII character set, which can be excplicitly specified as:</p><pre><code class="code">    Content-Type: text/plain; charset=use-ascii</code></pre><p>This is assumed when no <code class="code">&quot;Content-Type&quot;</code> header field is specified. It is also
recommended that this default be assumed when a syntactically invalid
<code class="code">&quot;Content-Type&quot;</code> header field is encountered.</p></div></div><div class="spec val" id="val-parser"><a href="#val-parser" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>parser : <a href="index.html#type-content">content</a> Angstrom.t</code></div><div class="doc"><p>The angstrom parser.</p></div></div><div class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>error</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-error.Invalid" class="anchored"><td class="def constructor"><a href="#type-error.Invalid" class="anchor"></a><code><span class="keyword">| </span></code><code>`Invalid<span class="keyword"> of </span>string<span class="keyword"> * </span>string list</code></td></tr><tr id="type-error.Incomplete" class="anchored"><td class="def constructor"><a href="#type-error.Incomplete" class="anchor"></a><code><span class="keyword">| </span></code><code>`Incomplete</code></td></tr></table><code> ]</code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-of_string"><a href="#val-of_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_string : string <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-content">content</a>, <a href="index.html#type-error">error</a>) Pervasives.result</code></div><div class="doc"><p><code class="code">of_string str</code> parses an
<a href="https://tools.ietf.org/html/rfc2045#section-5.1">RFC2045</a><a href="index.html#type-content">content</a>
starting at <code class="code">0</code> in <code class="code">str</code>. We append a CRLF line break to the string <code class="code">str</code>
to ensure that the parsing terminates.</p></div></div><div class="spec val" id="val-of_string_with_crlf"><a href="#val-of_string_with_crlf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_string_with_crlf : string <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-content">content</a>, <a href="index.html#type-error">error</a>) Pervasives.result</code></div><div class="doc"><p><code class="code">of_string_with_crlf str</code> parses an
<a href="https://tools.ietf.org/html/rfc2045#section-5.1">RFC2045</a><a href="index.html#type-content">content</a>
starting at <code class="code">0</code> in <code class="code">str</code>. We <b>don't</b> append a CRLF line break to the string <code class="code">str</code>
but we expect this line break inside <code class="code">str</code>. We need the CRLF line
break to terminate the parsing.</p></div></div><div class="spec val" id="val-of_string_raw"><a href="#val-of_string_raw" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_string_raw : string <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-content">content</a><span class="keyword"> * </span>int, <a href="index.html#type-error">error</a>) Pervasives.result</code></div><div class="doc"><p><code class="code">of_string_raw str off len</code> parses an
<a href="https://tools.ietf.org/html/rfc2045#section-5.1">RFC2045</a><a href="index.html#type-content">content</a>
starting at <code class="code">off</code> in <code class="code">str</code> to a tuple <code class="code">(content, count)</code> with:</p><ul><li><code class="code">content</code> the <a href="index.html#type-content">content</a></li><li><code class="code">count</code> the number of byte read starting at <code class="code">off</code> to parse the <code class="code">content</code>.</li></ul><p>We <b>don't</b> append a CRLF line break to the string <code class="code">str</code> but we
expect this line break inside <code class="code">str</code>. We the the CRLF line break to terminate
the parsing.</p></div></div></body></html>